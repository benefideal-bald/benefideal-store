# ‚úÖ –ß–µ–∫–ª–∏—Å—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ Railway

## üîç –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ Railway

### 1. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (Environment Variables)

–í –ø–∞–Ω–µ–ª–∏ Railway ‚Üí –≤–∞—à –ø—Ä–æ–µ–∫—Ç ‚Üí **Variables** –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã:

#### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ:
- ‚úÖ `CARDLINK_SHOP_ID` = `oa2Q9jq2Al`
- ‚úÖ `CARDLINK_API_TOKEN` = (–≤–∞—à —Ç–æ–∫–µ–Ω –∏–∑ CardLink)
- ‚úÖ `TELEGRAM_BOT_TOKEN` = `8460494431:AAFOmSEPrzQ1j4_L-4vBG_c38iL2rfx41us`
- ‚úÖ `TELEGRAM_CHAT_ID` = `8334777900`
- ‚úÖ `ADMIN_PASSWORD` = (–≤–∞—à –ø–∞—Ä–æ–ª—å –¥–ª—è –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏)

#### –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ:
- `CARDLINK_API_URL` = `https://cardlink.link/api/v1/bill/create` (–µ—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω–æ, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
- `DATABASE_PATH` = (–Ω–µ –Ω—É–∂–Ω–æ, Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—Å—Ç `data/`)

---

### 2. –î–æ–º–µ–Ω –∏ URL

1. **Railway URL:**
   - –í Railway ‚Üí Settings ‚Üí Domains
   - –ó–∞–ø–∏—à–∏—Ç–µ –≤–∞—à Railway URL (–Ω–∞–ø—Ä–∏–º–µ—Ä, `benefideal-store-production.up.railway.app`)

2. **Custom Domain (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ):**
   - –î–æ–±–∞–≤—å—Ç–µ `benefideal.ru` –≤ Railway ‚Üí Settings ‚Üí Domains
   - –û–±–Ω–æ–≤–∏—Ç–µ DNS –∑–∞–ø–∏—Å–∏ —É —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –¥–æ–º–µ–Ω–∞:
     - CNAME: `benefideal.ru` ‚Üí `your-app.up.railway.app`

---

### 3. –û–±–Ω–æ–≤–∏—Ç—å Callback URL –≤ CardLink

‚ö†Ô∏è **–ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û:** –û–±–Ω–æ–≤–∏—Ç–µ Callback URL –≤ CardLink!

1. –ó–∞–π–¥–∏—Ç–µ –≤ –ø–∞–Ω–µ–ª—å CardLink
2. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–æ–µ–∫—Ç "Benefideal"
3. –ù–∞–π–¥–∏—Ç–µ "Result URL" –∏–ª–∏ "Callback URL"
4. –ò–∑–º–µ–Ω–∏—Ç–µ –Ω–∞:
   - **–ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ Railway URL:** `https://your-app.up.railway.app/api/cardlink/callback`
   - **–ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ —Å–≤–æ–π –¥–æ–º–µ–Ω:** `https://benefideal.ru/api/cardlink/callback`
5. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

---

### 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–µ–ø–ª–æ—è

1. **–õ–æ–≥–∏:**
   - Railway ‚Üí Deployments ‚Üí –≤—ã–±–µ—Ä–∏—Ç–µ –ø–æ—Å–ª–µ–¥–Ω–∏–π –¥–µ–ø–ª–æ–π ‚Üí Logs
   - –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: `‚úÖ Server running on port 3000`
   - –ù–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ—à–∏–±–æ–∫

2. **Health Check:**
   - –û—Ç–∫—Ä–æ–π—Ç–µ: `https://your-app.up.railway.app/health`
   - –î–æ–ª–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å: `{"status":"ok"}`

3. **–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞:**
   - –û—Ç–∫—Ä–æ–π—Ç–µ: `https://your-app.up.railway.app/`
   - –î–æ–ª–∂–µ–Ω –æ—Ç–∫—Ä—ã—Ç—å—Å—è —Å–∞–π—Ç

---

### 5. –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

Railway –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **–ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ**, –ø–æ—ç—Ç–æ–º—É:
- ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –≤ `data/subscriptions.db` **–ù–ï —É–¥–∞–ª—è–µ—Ç—Å—è** –ø—Ä–∏ –¥–µ–ø–ª–æ–µ
- ‚úÖ –í—Å–µ –∑–∞–∫–∞–∑—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –º–µ–∂–¥—É –¥–µ–ø–ª–æ—è–º–∏
- ‚úÖ –û—Ç–∑—ã–≤—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- –°–¥–µ–ª–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π –∑–∞–∫–∞–∑
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å: `https://your-app.up.railway.app/admin.html?password=–í–ê–®_–ü–ê–†–û–õ–¨`
- –ó–∞–∫–∞–∑ –¥–æ–ª–∂–µ–Ω –ø–æ—è–≤–∏—Ç—å—Å—è

---

### 6. –ü—Ä–æ–≤–µ—Ä–∫–∞ Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

1. –°–¥–µ–ª–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π –∑–∞–∫–∞–∑
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Telegram ‚Äî –¥–æ–ª–∂–Ω–æ –ø—Ä–∏–π—Ç–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
3. –ï—Å–ª–∏ –Ω–µ –ø—Ä–∏—Ö–æ–¥–∏—Ç:
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `TELEGRAM_BOT_TOKEN` –∏ `TELEGRAM_CHAT_ID` –≤ Railway
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Railway –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫

---

### 7. –ü—Ä–æ–≤–µ—Ä–∫–∞ CardLink –ø–ª–∞—Ç–µ–∂–µ–π

1. –°–æ–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π –∑–∞–∫–∞–∑ –Ω–∞ —Å–∞–π—Ç–µ
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –æ–ø–ª–∞—Ç—ã CardLink
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ:
   - ‚úÖ –¶–µ–Ω–∞ –≤ —Ä—É–±–ª—è—Ö (RUB)
   - ‚úÖ –î–æ—Å—Ç—É–ø–Ω—ã –º–µ—Ç–æ–¥—ã: –°–ë–ü, –∫–∞—Ä—Ç–∞, –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–∞
4. –ü–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:
   - ‚úÖ –ó–∞–∫–∞–∑ –ø–æ—è–≤–∏–ª—Å—è –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏
   - ‚úÖ –ü—Ä–∏—à–ª–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ Telegram

---

## üêõ –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### –ü—Ä–æ–±–ª–µ–º–∞: "Cannot find module"
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ `package.json` –µ—Å—Ç—å –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –∏ –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É–∫–∞–∑–∞–Ω—ã.

### –ü—Ä–æ–±–ª–µ–º–∞: "Port already in use"
**–†–µ—à–µ–Ω–∏–µ:** Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç `PORT`, –Ω–µ –Ω—É–∂–Ω–æ —É–∫–∞–∑—ã–≤–∞—Ç—å –≤—Ä—É—á–Ω—É—é.

### –ü—Ä–æ–±–ª–µ–º–∞: –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –ø—É—Å—Ç–∞—è –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è
**–†–µ—à–µ–Ω–∏–µ:** 
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è `data/` –Ω–µ –≤ `.gitignore` (–æ–Ω–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Ç–∞–º!)
- Railway —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ñ–∞–π–ª—ã –º–µ–∂–¥—É –¥–µ–ø–ª–æ—è–º–∏, –Ω–æ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –¥–µ–ø–ª–æ–µ –±–∞–∑–∞ –ø—É—Å—Ç–∞—è ‚Äî —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ

### –ü—Ä–æ–±–ª–µ–º–∞: Callback –æ—Ç CardLink –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Callback URL –≤ CardLink
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Railway –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Railway URL –¥–æ—Å—Ç—É–ø–µ–Ω –∏–∑–≤–Ω–µ (–Ω–µ localhost)

---

## ‚úÖ –§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

- [ ] –í—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –≤ Railway
- [ ] Callback URL –æ–±–Ω–æ–≤–ª–µ–Ω –≤ CardLink
- [ ] –°–∞–π—Ç –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø–æ Railway URL
- [ ] Health check —Ä–∞–±–æ—Ç–∞–µ—Ç (`/health`)
- [ ] –¢–µ—Å—Ç–æ–≤—ã–π –∑–∞–∫–∞–∑ —Å–æ–∑–¥–∞–µ—Ç—Å—è
- [ ] Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–∏—Ö–æ–¥—è—Ç
- [ ] –ó–∞–∫–∞–∑—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏
- [ ] –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –º–µ–∂–¥—É –¥–µ–ø–ª–æ—è–º–∏

---

## üìû –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ Railway ‚Üí Deployments ‚Üí Logs
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Callback URL –≤ CardLink
4. –°–¥–µ–ª–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π –∑–∞–∫–∞–∑ –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏

---

## üéâ –ì–æ—Ç–æ–≤–æ!

–ï—Å–ª–∏ –≤—Å–µ –ø—É–Ω–∫—Ç—ã –≤—ã–ø–æ–ª–Ω–µ–Ω—ã, –≤–∞—à —Å–∞–π—Ç –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞ Railway –±–µ–∑ —Å–ø–∏–Ω-–¥–∞—É–Ω–∞ –∏ —Å –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ–π –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö!

